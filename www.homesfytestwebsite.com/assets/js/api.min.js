let RegNo,city,magnet_id,magnet_number,IVR_phone_no,whatsappNumber,baseUrl=(window.location.href.includes("file")||window.location.href.includes("localhost"),"https://api.homesfy.in/"),projectId=2972,is_magnet=0;async function getProjectData(t){let e=window.location.toString();var r=new URL(e).searchParams.get("magnet_id");try{let e;if(t&&r)e=await fetch("https://api.homesfy.in/api/leads/projectdata/"+t+"?magnet_id="+r);else{if(!t)return"Error : Project id not provided ";e=await fetch("https://api.homesfy.in/api/leads/projectdata/"+t)}if(e.ok)return await e.json();throw Error("Failed to fetch project data")}catch(t){return console.error("Error fetching project data:",t),t}}async function SendLead(t,e){try{let r=await fetch(baseUrl+"api/leads/create",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});if(e||(e="thankyou.html"),r.ok)return window.location.href=e,1;throw Error("Failed to send lead data")}catch(t){return console.error("Error sending lead data:",t),t}}function updateContactElements(t,e,r){let a=document.getElementsByClassName("IVR_Phone_No_Text");for(let e=0;e<a.length;e++)a[e].innerText=t||"+917948540394";let n=document.getElementsByClassName("IVR_Phone_No_Url");for(let e=0;e<n.length;e++)n[e].href=`tel:${t||"+917948540394"}`;let o=document.getElementsByClassName("whatsapp_url");for(let t=0;t<o.length;t++)o[t].href=`https://api.whatsapp.com/send?phone=+91${e||"8976997450"}&text=I want to know more about ${r||"the property"}`}async function apiDataGet(t){try{let e=await getProjectData(t);if(e&&e.result){t=e.result.Project.p_id,IVR_phone_no=e.result.magnet_id?e.result.magnet_number:e.result.phone,whatsappNumber=e.result.whatsupUser.phone;let r=e.result.wp_links_sms;(r=r.split("="))[1]=e.result.magnet_id?"+91"+e.result.magnet_number+"&text":r[1],r[2]="I want to know more about "+r[2],r=r.join("="),city=e.result.Project.Region.city,RegNo=e.result.Project.Region.region_name,is_magnet=e.result.is_magnet,magnet_id=e.result.magnet_id?e.result.magnet_id:null,updateContactElements(IVR_phone_no,whatsappNumber,e.result.Project.project_name)}}catch(t){console.error("Error initializing API data:",t),updateContactElements("917304927701","917304412403","the property")}}function changeProjectId(t){projectId=t,apiDataGet(t)}async function getIpAddress(){try{let t=await fetch("https://api.ipify.org/?format=json",{mode:"cors"});if(!t.ok)return"0.0.0.0";{let e=await t.json();return console.log(e,"IP Address"),e.ip||"0.0.0.0"}}catch(t){return console.error("Error fetching IP address:",t),"0.0.0.0"}}function deviceData(){return navigator.userAgent.match(/Android/i)||navigator.userAgent.match(/webOS/i)||navigator.userAgent.match(/iPhone/i)||navigator.userAgent.match(/Windows Phone/i)?"Mobile":navigator.userAgent.match(/iPad/i)||navigator.userAgent.match(/iPod/i)?"Tablet":navigator.userAgent.match(/BlackBerry/i)?"Blackberry":"Desktop"}function browserData(){let t;return-1!=(navigator.userAgent.indexOf("Opera")||navigator.userAgent.indexOf("OPR"))?t="Opera":94!=navigator.userAgent.indexOf("Chrome")?t="Chrome":-1!=navigator.userAgent.indexOf("Mozilla")?t="Mozilla":-1!=navigator.userAgent.indexOf("Safari")?t="Safari":-1!=navigator.userAgent.indexOf("Firefox")?t="Firefox":(-1!=navigator.userAgent.indexOf("MSIE")||1==!!document.documentMode)&&(t="MSIE"),t}function queryForm(t=null){var e={},r=!!t&&!!t.reset&&t.reset,a=window.location.toString().split("?");if(a.length>1){var n=a[1].split("&");for(let t in n){var o=n[t].split("=");(r||null===sessionStorage.getItem(o[0]))&&sessionStorage.setItem(o[0],o[1]),"utm_source"==o[0]&&(e.utmsource=o[1]),"utm_medium"==o[0]&&(e.utmmedium=o[1]),"utm_campaign"==o[0]&&(e.utmcampaign=o[1]),"utm_content"==o[0]&&(e.utmcontent=o[1]),"utm_term"==o[0]&&(e.utmterm=o[1]),"p_nationality"==o[0]&&(e.param_nationality=o[1]),"p_regionid"==o[0]&&(e.param_region_id=o[1])}return e}return null}